<?xml version="1.0" encoding="UTF-8"?>
<AiEvaluationDefinition xmlns="http://soap.sforce.com/2006/04/metadata">
    <name>Regression_Test</name>
    <subjectName>MyOrgButler</subjectName>
    <subjectType>AGENT</subjectType>
    <subjectVersion>v1</subjectVersion>
    <description>Conference demo story: A sales rep discovers their AI assistant's capabilities</description>
    <testCase>
        <number>1</number>
        <inputs>
            <utterance>which opportunity should I focus on next</utterance>
        </inputs>
        <expectation>
            <name>topic_assertion</name>
            <expectedValue>MyOrgButler</expectedValue>
        </expectation>
        <expectation>
            <name>actions_assertion</name>
            <expectedValue>['QueryRecordsWithSoql']</expectedValue>
        </expectation>
        <expectation>
            <name>bot_response_rating</name>
            <expectedValue>Recommends an opportunity based on value and close date</expectedValue>
        </expectation>
    </testCase>
    <testCase>
        <number>2</number>
        <inputs>
            <utterance>create a follow-up task for the Burlington Textiles opportunity</utterance>
        </inputs>
        <expectation>
            <name>topic_assertion</name>
            <expectedValue>MyOrgButler</expectedValue>
        </expectation>
        <expectation>
            <name>actions_assertion</name>
            <expectedValue>['CallRestApi']</expectedValue>
        </expectation>
        <expectation>
            <name>bot_response_rating</name>
            <expectedValue>Confirms task creation with a link to view it</expectedValue>
        </expectation>
    </testCase>
    <testCase>
        <number>3</number>
        <inputs>
            <utterance>I'm new here, what customizations does this org have?</utterance>
        </inputs>
        <expectation>
            <name>topic_assertion</name>
            <expectedValue>MyOrgButler</expectedValue>
        </expectation>
        <expectation>
            <name>actions_assertion</name>
            <expectedValue>['ExploreOrgSchema']</expectedValue>
        </expectation>
        <expectation>
            <name>bot_response_rating</name>
            <expectedValue>Lists custom objects including Memory__c</expectedValue>
        </expectation>
    </testCase>
    <testCase>
        <number>4</number>
        <inputs>
            <utterance>show me a diagram of the custom objects in this org</utterance>
        </inputs>
        <expectation>
            <name>topic_assertion</name>
            <expectedValue>MyOrgButler</expectedValue>
        </expectation>
        <expectation>
            <name>actions_assertion</name>
            <expectedValue>['ExploreOrgSchema', 'CreatePlantUmlUrl']</expectedValue>
        </expectation>
        <expectation>
            <name>bot_response_rating</name>
            <expectedValue>Provides a diagram link showing object relationships</expectedValue>
        </expectation>
    </testCase>
    <testCase>
        <number>5</number>
        <inputs>
            <utterance>who built this assistant? search the web for Aquiva Labs</utterance>
        </inputs>
        <expectation>
            <name>topic_assertion</name>
            <expectedValue>MyOrgButler</expectedValue>
        </expectation>
        <expectation>
            <name>actions_assertion</name>
            <expectedValue>['SearchWeb']</expectedValue>
        </expectation>
        <expectation>
            <name>bot_response_rating</name>
            <expectedValue>Provides information about Aquiva Labs as a Salesforce company</expectedValue>
        </expectation>
    </testCase>
    <testCase>
        <number>6</number>
        <inputs>
            <utterance>are there any open issues on the aquivalabs/my-org-butler repo?</utterance>
        </inputs>
        <expectation>
            <name>topic_assertion</name>
            <expectedValue>MyOrgButler</expectedValue>
        </expectation>
        <expectation>
            <name>actions_assertion</name>
            <expectedValue>['CallGitHubApi']</expectedValue>
        </expectation>
        <expectation>
            <name>bot_response_rating</name>
            <expectedValue>Shows open GitHub issues from the repository</expectedValue>
        </expectation>
    </testCase>
    <testCase>
        <number>7</number>
        <inputs>
            <utterance>how much Apex code is in this org?</utterance>
        </inputs>
        <expectation>
            <name>topic_assertion</name>
            <expectedValue>MyOrgButler</expectedValue>
        </expectation>
        <expectation>
            <name>actions_assertion</name>
            <expectedValue>['CallToolingApi']</expectedValue>
        </expectation>
        <expectation>
            <name>bot_response_rating</name>
            <expectedValue>Returns the count or list of Apex classes</expectedValue>
        </expectation>
    </testCase>
    <testCase>
        <number>8</number>
        <inputs>
            <utterance>use the Metadata API to read the aquiva_os__MyOrgButlerUser permission set definition</utterance>
        </inputs>
        <expectation>
            <name>topic_assertion</name>
            <expectedValue>MyOrgButler</expectedValue>
        </expectation>
        <expectation>
            <name>actions_assertion</name>
            <expectedValue>['CallMetadataApi']</expectedValue>
        </expectation>
        <expectation>
            <name>bot_response_rating</name>
            <expectedValue>Shows the permission set configuration from the Metadata API</expectedValue>
        </expectation>
    </testCase>
    <testCase>
        <number>9</number>
        <inputs>
            <utterance>from now on, show opportunities with the Amount and CloseDate fields</utterance>
        </inputs>
        <expectation>
            <name>topic_assertion</name>
            <expectedValue>MyOrgButler</expectedValue>
        </expectation>
        <expectation>
            <name>actions_assertion</name>
            <expectedValue>['StoreCustomInstruction']</expectedValue>
        </expectation>
        <expectation>
            <name>bot_response_rating</name>
            <expectedValue>Confirms it will remember this preference for future interactions</expectedValue>
        </expectation>
    </testCase>
    <testCase>
        <number>10</number>
        <inputs>
            <utterance>Sort that by close date instead, and remember that for next time</utterance>
            <conversationHistory>
                <role>user</role>
                <message>Show me my opportunities</message>
                <index>0</index>
            </conversationHistory>
            <conversationHistory>
                <role>agent</role>
                <message>Here are your opportunities sorted by name: Acme Q1 Expansion ($500K), Burlington Textiles ($235K)</message>
                <index>1</index>
            </conversationHistory>
        </inputs>
        <expectation>
            <name>topic_assertion</name>
            <expectedValue>MyOrgButler</expectedValue>
        </expectation>
        <expectation>
            <name>actions_assertion</name>
            <expectedValue>['StoreCustomInstruction']</expectedValue>
        </expectation>
        <expectation>
            <name>bot_response_rating</name>
            <expectedValue>Confirms it will remember to sort by close date for future interactions</expectedValue>
        </expectation>
    </testCase>
    <testCase>
        <number>11</number>
        <inputs>
            <utterance>Not quite, from now on only show me high-value opportunities above 100K</utterance>
            <conversationHistory>
                <role>user</role>
                <message>Show me my opportunities</message>
                <index>0</index>
            </conversationHistory>
            <conversationHistory>
                <role>agent</role>
                <message>Here are all your opportunities including small deals under 10K</message>
                <index>1</index>
            </conversationHistory>
        </inputs>
        <expectation>
            <name>topic_assertion</name>
            <expectedValue>MyOrgButler</expectedValue>
        </expectation>
        <expectation>
            <name>actions_assertion</name>
            <expectedValue>['StoreCustomInstruction']</expectedValue>
        </expectation>
        <expectation>
            <name>bot_response_rating</name>
            <expectedValue>Confirms it will remember to only show high-value opportunities</expectedValue>
        </expectation>
    </testCase>
    <testCase>
        <number>12</number>
        <inputs>
            <utterance>what is Aquiva's work and travel policy?</utterance>
        </inputs>
        <expectation>
            <name>topic_assertion</name>
            <expectedValue>MyOrgButler</expectedValue>
        </expectation>
        <expectation>
            <name>actions_assertion</name>
            <expectedValue>['SearchVectorDatabase']</expectedValue>
        </expectation>
        <expectation>
            <name>bot_response_rating</name>
            <expectedValue>Provides information about Aquiva's work and travel policy from the knowledge base</expectedValue>
        </expectation>
    </testCase>
    <testCase>
        <number>13</number>
        <inputs>
            <utterance>read the files attached to the Acme Q1 Expansion Deal and summarize what they contain</utterance>
        </inputs>
        <expectation>
            <name>topic_assertion</name>
            <expectedValue>MyOrgButler</expectedValue>
        </expectation>
        <expectation>
            <name>actions_assertion</name>
            <expectedValue>['AnswerWithRelatedFiles']</expectedValue>
        </expectation>
        <expectation>
            <name>bot_response_rating</name>
            <expectedValue>Summarizes the NDA document content</expectedValue>
        </expectation>
    </testCase>
    <testCase>
        <number>14</number>
        <inputs>
            <utterance>send me an in-org notification saying the deployment is complete</utterance>
        </inputs>
        <expectation>
            <name>topic_assertion</name>
            <expectedValue>MyOrgButler</expectedValue>
        </expectation>
        <expectation>
            <name>actions_assertion</name>
            <expectedValue>['NotifyUser']</expectedValue>
        </expectation>
        <expectation>
            <name>bot_response_rating</name>
            <expectedValue>Confirms the in-org notification was sent to the current user</expectedValue>
        </expectation>
    </testCase>
</AiEvaluationDefinition>
